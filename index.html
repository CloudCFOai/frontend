<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CloudCFO.ai ‚Äî Landing + Dashboard (EN/FR) with Carbon Passport ‚Äî v4</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root{
      --primary-navy:#0A1628;
      --electric:#0066FF;
      --teal:#0fb6d3;
      --emerald:#10B981;
      --amber:#F59E0B;
      --coral:#FF6B6B;
      --gray-900:#0b1220;
      --gray-800:#111827;
      --gray-700:#374151;
      --gray-600:#4B5563;
      --gray-500:#6B7280;
      --gray-400:#9CA3AF;
      --off:#FAFBFC;
      --white:#fff;
      --shadow-lg:0 20px 40px rgba(10,22,40,.18);
      --radius:16px;
      --ease: cubic-bezier(.22,.61,.36,1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--gray-800);
      background:linear-gradient(180deg,#f7f9ff, #fff);
    }
    /* Top App Tabs */
    .top-tabs{display:flex; justify-content:center; gap:10px; padding:12px}
    .pill{background:#fff; border:1px solid rgba(0,0,0,.06); padding:10px 14px; border-radius:999px; font-weight:800; cursor:pointer}
    .pill.active{background:linear-gradient(90deg,var(--electric),#3aa3ff); color:#fff; box-shadow:0 10px 20px rgba(0,102,255,.25)}
    /* Landing shell */
    .app{display:grid; grid-template-columns: 280px 1fr; min-height:calc(100vh - 56px)}
    aside{position:sticky; top:0; height:calc(100vh - 56px); background:linear-gradient(180deg, var(--primary-navy), #15223a); color:#e7efff; padding:24px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06)}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:-.02em; font-size:20px}
    .brand .badge{padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.08); font-size:12px; font-weight:600}
    nav{margin-top:24px}
    .nav-item{display:flex; align-items:center; gap:12px; padding:12px 14px; border-radius:10px; cursor:pointer; transition: transform .2s var(--ease), background .2s var(--ease), box-shadow .2s var(--ease); margin-bottom:8px}
    .nav-item:hover{transform:translateX(4px); background:rgba(255,255,255,.06)}
    .nav-item.active{background:linear-gradient(90deg, var(--electric), #3aa3ff); color:white; box-shadow:0 10px 20px rgba(0,102,255,.25)}
    .content{padding:0}
    .lang-toggle{margin-top:18px; display:flex; gap:8px}
    .lang-btn{background:rgba(255,255,255,.1); color:#fff; border:1px solid rgba(255,255,255,.25); border-radius:999px; padding:6px 10px; cursor:pointer; font-weight:700}
    .lang-btn.active{background:#fff; color:#0a1628}
    .section{padding:56px clamp(16px,3vw,40px)}
    .hero{position:relative; overflow:hidden; background: radial-gradient(1200px 600px at 20% -10%,rgba(0,102,255,.25),transparent), radial-gradient(900px 500px at 100% 10%,rgba(15,182,211,.25),transparent), linear-gradient(135deg,#0a1628, #13305d 30%, #0f1c39); color:white; border-bottom-left-radius:24px; border-bottom-right-radius:24px}
    .hero-inner{max-width:1200px; margin:0 auto; display:grid; grid-template-columns:1.1fr .9fr; gap:36px; align-items:center}
    .hero h1{font-size: clamp(32px,4vw,56px); line-height:1.05; margin:0; letter-spacing:-.03em}
    .hero p{opacity:.9; font-size: clamp(16px,1.2vw,20px)}
    .cta{display:flex; gap:12px; margin-top:24px}
    .btn{padding:14px 20px; border-radius:12px; font-weight:700; border:0; cursor:pointer; transition:transform .15s var(--ease), box-shadow .2s var(--ease), filter .2s var(--ease)}
    .btn-primary{background:linear-gradient(135deg,var(--electric), #3aa3ff); color:white; box-shadow:0 10px 20px rgba(0,102,255,.3)}
    .btn-secondary{background:rgba(255,255,255,.1); color:white; border:1.5px solid rgba(255,255,255,.25); backdrop-filter: blur(8px)}
    .btn:hover{transform:translateY(-2px) scale(1.02)}
    .btn:active{transform:translateY(0) scale(.98)}
    .dash{background: #0d1830; border-radius:16px; padding:20px; box-shadow: var(--shadow-lg); border:1px solid rgba(255,255,255,.06)}
    .cards{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05)); border:1px solid rgba(255,255,255,.12); border-radius:14px; padding:14px; min-height:120px}
    .stat{font-size:28px; font-weight:800}
    canvas{max-width:100%}
    .device{border-radius:24px; overflow:hidden; background:white; padding:6px}
    .hero-floating{position:absolute; inset:auto 0 -80px auto; right:48px; width:min(520px, 42vw); transform: rotate(-2deg); filter:drop-shadow(0 30px 40px rgba(0,0,0,.4)); animation: float 6s ease-in-out infinite}
    @keyframes float{0%,100%{transform: translateY(0) rotate(-2deg)}50%{transform: translateY(-10px) rotate(-2deg)}}
    .section h2{font-size: clamp(28px,2.5vw,40px); margin:0 0 14px}
    .sub{color:var(--gray-600); margin-bottom:28px}
    .grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:18px; max-width:1200px; margin:0 auto}
    .col-6{grid-column: span 6}
    .col-12{grid-column: span 12}
    .glass{background:rgba(255,255,255,.7); border:1px solid rgba(10,22,40,.08); backdrop-filter: blur(10px); border-radius:16px; padding:20px}
    .feature{display:flex; gap:12px; align-items:flex-start; padding:14px 12px; border-radius:12px; transition:transform .2s var(--ease), box-shadow .2s}
    .feature:hover{transform:translateY(-2px); box-shadow:0 10px 20px rgba(10,22,40,.08)}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700}
    .success{background:rgba(16,185,129,.12); color:#065f46}
    .warning{background:rgba(245,158,11,.12); color:#92400e}
    .accent{background:rgba(0,102,255,.12); color:#0046a3}
    .services{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:14px}
    .svc{background:white; border:1.5px solid rgba(0,0,0,.05); border-radius:16px; padding:18px; transition: transform .2s var(--ease), box-shadow .2s var(--ease), border .2s}
    .svc:hover{transform:translateY(-4px) scale(1.01); box-shadow:0 16px 30px rgba(10,22,40,.08); border-color: rgba(0,102,255,.4)}
    .svc h4{margin:8px 0 4px}
    .svc .meta{display:flex; gap:12px; font-size:12px; color:var(--gray-600)}
    .svc .connect{width:100%; margin-top:12px}
    .svc.connected{border-color: rgba(16,185,129,.6); background:linear-gradient(180deg, rgba(16,185,129,.07), white)}
    .hover-scale{transition: transform .15s var(--ease)} .hover-scale:hover{transform:scale(1.02)}
    .skeleton{position:relative; overflow:hidden; background:#e9edf5}
    .skeleton::after{content:''; position:absolute; inset:0; transform:translateX(-100%); background:linear-gradient(90deg, rgba(255,255,255,0) 0, rgba(255,255,255,.6) 50%, rgba(255,255,255,0) 100%); animation: shimmer 1.6s infinite}
    @keyframes shimmer{100%{transform:translateX(100%)}}
    .check{display:inline-flex; align-items:center; gap:8px; font-weight:700; color:var(--emerald)}
    .panel{max-width:1200px; margin:0 auto}

    /* DASHBOARD */
    .dash-shell{display:grid; grid-template-columns:260px 1fr; gap:16px; padding:16px}
    .sidebar{background:var(--primary-navy);color:#fff;border-radius:16px;padding:16px;min-height:640px}
    .main{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:16px;padding:20px;min-height:640px}

    .kpi{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:12px}
    .kpi .metric{background:linear-gradient(180deg,#fff, #f7fbff);border:1px solid rgba(0,0,0,.06);border-radius:12px;padding:16px}
    .metric .label{color:var(--gray-500);font-size:.85rem}
    .metric .value{font-size:28px;font-weight:800;margin-top:6px}

    .table{width:100%;border-collapse:separate;border-spacing:0 10px}
    .table th{font-size:.8rem;text-transform:uppercase;letter-spacing:.04em;color:#fff;background:var(--primary-navy);padding:10px 12px}
    .table td{background:#fff;padding:12px;border-top:1px solid #e5e7eb;border-bottom:1px solid #e5e7eb}

    /* Carbon Passport widgets */
    .cp-step{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.06);overflow:hidden;margin-bottom:16px}
    .cp-hd{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background:linear-gradient(135deg,var(--primary-navy),var(--electric));color:#fff;font-weight:800}
    .cp-body{padding:16px}
    .row{display:flex; gap:12px; flex-wrap:wrap}
    .input{flex:1; display:flex; flex-direction:column; gap:6px}
    .input input, .input select{padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb}
    .api-pill{display:flex;align-items:center;gap:10px;border:1px solid #e5e7eb;border-radius:12px;padding:10px;background:#fff;min-width:260px}
    .dot{width:10px;height:10px;border-radius:50%}
    .ok{background:var(--emerald)} .wait{background:var(--amber)} .off{background:#9CA3AF}
    .btn-wide{width:100%; margin-top:8px}
    .grid3{display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:12px}
    .scope{background:linear-gradient(180deg,#fff,#f7fbff); border:1px solid rgba(0,0,0,.06); border-radius:12px; padding:14px; text-align:center}
    .scope h4{margin:6px 0 0}
    .scope .big{font-size:28px; font-weight:800; color:#0066ff}
    .note{background:linear-gradient(135deg, rgba(245,158,11,.08), rgba(255,255,255,.8)); border-left:4px solid var(--amber); padding:12px; border-radius:12px}
    .result{display:grid; grid-template-columns: 1.1fr .9fr; gap:14px}
    .tile{background:linear-gradient(135deg,#0a223f,#0a1628); color:#e6f3ff; border-radius:16px; padding:18px; position:relative; overflow:hidden}
    .tile h3{margin:0 0 8px}
    .tile .val{font-size:44px; font-weight:800}
    .breakdown{background:#fff; border:1px solid rgba(0,0,0,.06); border-radius:14px; padding:14px}
    .prog{height:8px; background:#eef2ff; border-radius:999px; overflow:hidden}
    .prog span{display:block; height:100%}
    .actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:10px}
    .btn-ghost{background:#fff; color:#0066ff; border:2px solid #0066ff}
    .qr{display:flex;align-items:center;gap:8px}

    /* Views */
    .view{display:none}
    .view.active{display:block}

    /* Print */
    @media print{
      .top-tabs{display:none}
      .mobile-nav,.fab{display:none !important}
      .app{grid-template-columns:1fr}
      aside{display:none}
      .dash-shell{grid-template-columns:1fr}
    }
    /* Mobile */
    @media(max-width: 980px){
      .app{grid-template-columns:1fr}
      aside{display:none}
      .hero-inner{grid-template-columns:1fr}
      .hero-floating{position:relative; right:auto; inset:auto; width:100%; transform:none; margin-top:16px}
      .dash-shell{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="top-tabs">
    <button class="pill active" data-tab="landing" data-i18n="topLanding">Landing</button>
    <button class="pill" data-tab="dashboard" data-i18n="topDashboard">Dashboard</button>
    <button class="pill" data-tab="download" data-i18n="topExport">Export</button>
  </div>

  <!-- VIEWS -->
  <div id="landing" class="view active">
    <div class="app">
      <aside>
        <div class="brand">CloudCFO.ai <span class="badge">Beta</span></div>
        <div class="lang-toggle">
          <button class="lang-btn active" id="btnEN">EN</button>
          <button class="lang-btn" id="btnFR">FR</button>
        </div>
        <nav>
          <div class="nav-item active" data-target="#general" data-i18n="navGeneral">üè† General</div>
          <div class="nav-item" data-target="#differentiators" data-i18n="navDiff">‚ú® Differentiators</div>
          <div class="nav-item" data-target="#signup" data-i18n="navSignup">üìù Sign‚Äëup & Integrations</div>
        </nav>
        <div style="margin-top:24px; font-size:13px; opacity:.9">
          <div class="badge success" data-i18n="badgeSoc2">SOC2‚Äëready</div>
          <div class="badge warning" data-i18n="badgeOcr">Sub‚Äësecond OCR</div>
          <div class="badge accent" data-i18n="badgeCarbon">Carbon Passport</div>
        </div>
      </aside>
      <main class="content">
        <section class="section hero" id="general">
          <div class="hero-inner">
            <div>
              <h1 data-i18n="heroTitle">Your AI‚ÄëPowered CFO in the Cloud</h1>
              <p data-i18n="heroSub">Connect email, drives, and chats ‚Äî CloudCFO auto‚Äëdiscovers receipts, extracts data in <b>&lt;500ms</b>, and turns them into real‚Äëtime insights and a üå± Carbon Passport.</p>
              <div class="cta">
                <button class="btn btn-primary hover-scale" id="connectBtn" data-i18n="btnConnect">üîç Connect your accounts</button>
                <button class="btn btn-secondary hover-scale" id="uploadBtn" data-i18n="btnUpload">üì§ Quick upload</button>
              </div>
              <div style="margin-top:18px; display:flex; gap:10px; align-items:center">
                <span class="badge accent" data-i18n="worksWith">Works with: Gmail ¬∑ Drive ¬∑ Dropbox ¬∑ WhatsApp ¬∑ Telegram</span>
              </div>
            </div>
            <div class="device hero-floating">
              <div class="dash">
                <div class="cards">
                  <div class="card">
                    <div style="font-size:12px; opacity:.8" data-i18n="metricTotalExpenses">Total Expenses</div>
                    <div class="stat">$12,458</div>
                    <canvas id="spark1" height="50"></canvas>
                  </div>
                  <div class="card">
                    <div style="font-size:12px; opacity:.8" data-i18n="metricCarbon">Carbon this month</div>
                    <div class="stat">2.4t CO‚ÇÇe</div>
                    <canvas id="spark2" height="50"></canvas>
                  </div>
                  <div class="card">
                    <div style="font-size:12px; opacity:.8" data-i18n="metricDocs">Docs processed</div>
                    <div class="stat">847</div>
                    <div class="skeleton" style="height:10px; border-radius:5px; margin-top:6px"></div>
                  </div>
                  <div class="card">
                    <div style="font-size:12px; opacity:.8" data-i18n="metricHit">Hit rate</div>
                    <div class="stat">95%</div>
                    <div class="check" data-i18n="metricAccSla">‚úì Accuracy SLA</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="section" id="differentiators">
          <div class="panel">
            <h2 data-i18n="whyTitle">Why CloudCFO</h2>
            <p class="sub" data-i18n="whySub">AI‚Äëfirst financial automation, native chat integrations, and built‚Äëin carbon intelligence.</p>
            <div class="grid">
              <div class="col-6 glass feature">
                <div>ü§ñ</div>
                <div>
                  <h3 data-i18n="featAI">AI‚ÄëFirst Extraction</h3>
                  <p data-i18n="featAIDesc">Advanced LLM + vision pipeline delivers <b>sub‚Äësecond</b> processing and self‚Äëlearning patterns.</p>
                </div>
              </div>
              <div class="col-6 glass feature">
                <div>üí¨</div>
                <div>
                  <h3 data-i18n="featChat">WhatsApp & Telegram Native</h3>
                  <p data-i18n="featChatDesc">Send a photo, we do the rest ‚Äî the fastest way to capture receipts on mobile.</p>
                </div>
              </div>
              <div class="col-6 glass feature">
                <div>üå±</div>
                <div>
                  <h3 data-i18n="featCarbon">Carbon Passport</h3>
                  <p data-i18n="featCarbonDesc">Automatic Scope 1/2/3 mapping from invoices with downloadable, verifiable passports.</p>
                </div>
              </div>
              <div class="col-6 glass feature">
                <div>‚ö°</div>
                <div>
                  <h3 data-i18n="featDev">Developer‚ÄëFriendly</h3>
                  <p data-i18n="featDevDesc">Clean APIs & webhooks, great docs, and thoughtful defaults inspired by Stripe.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="section" id="signup">
          <div class="panel">
            <h2 data-i18n="signupTitle">Sign‚Äëup & Connect your channels</h2>
            <p class="sub" data-i18n="signupSub">Choose any intake source below. We‚Äôll start auto‚Äëdiscovering receipts instantly.</p>

            <div class="services">
              <div class="svc connected">
                <div style="font-size:28px">üìß</div>
                <h4>Gmail</h4>
                <div class="meta"><span>523 <span data-i18n="found">found</span></span><span><span data-i18n="accuracy">Accuracy</span> 95%</span></div>
                <button class="btn btn-primary connect">‚úì <span data-i18n="connected">Connected</span></button>
              </div>
              <div class="svc">
                <div style="font-size:28px">üìÆ</div>
                <h4>Outlook</h4>
                <p class="sub" style="margin:4px 0 8px" data-i18n="outlookDesc">Import from Microsoft email</p>
                <button class="btn btn-primary connect" data-i18n="connect">Connect</button>
              </div>
              <div class="svc connected">
                <div style="font-size:28px">üìÅ</div>
                <h4>Google Drive</h4>
                <div class="meta"><span>189 <span data-i18n="found">found</span></span><span>100% <span data-i18n="accuracy">Accuracy</span></span></div>
                <button class="btn btn-primary connect">‚úì <span data-i18n="connected">Connected</span></button>
              </div>
              <div class="svc">
                <div style="font-size:28px">üíß</div>
                <h4>Dropbox</h4>
                <p class="sub" style="margin:4px 0 8px" data-i18n="dropboxDesc">Scan selected folders</p>
                <button class="btn btn-primary connect" data-i18n="connect">Connect</button>
              </div>
              <div class="svc">
                <div style="font-size:28px">üì±</div>
                <h4>WhatsApp Business</h4>
                <p class="sub" style="margin:4px 0 8px" data-i18n="waDesc">Forward photos or PDFs</p>
                <button class="btn btn-primary connect" data-i18n="connect">Connect</button>
              </div>
              <div class="svc connected">
                <div style="font-size:28px">üí¨</div>
                <h4>Telegram</h4>
                <div class="meta"><span>135 <span data-i18n="found">found</span></span><span>88% <span data-i18n="accuracy">Accuracy</span></span></div>
                <button class="btn btn-primary connect">‚úì <span data-i18n="connected">Connected</span></button>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- DASHBOARD VIEW -->
  <div id="dashboard" class="view">
    <div class="dash-shell">
      <aside class="sidebar">
        <div class="nav-item active" data-sub="overview" data-i18n="sbOverview">üìä Overview</div>
        <div class="nav-item" data-sub="reports" data-i18n="sbReports">üìà Financial Reports</div>
        <div class="nav-item" data-sub="passport" data-i18n="sbPassport">üå± Carbon Passport</div>
        <div class="nav-item" data-sub="banking" data-i18n="sbBanking">üè¶ Banking</div>
        <div class="nav-item" data-sub="integrations" data-i18n="sbIntegrations">üîó Integrations</div>
        <div class="nav-item" data-sub="settings" data-i18n="sbSettings">‚öôÔ∏è Settings</div>
        <div style="margin-top:auto;padding-top:16px" class="sub"><span data-i18n="sbPlan">Pro Plan</span> ‚Ä¢ <span id="sbDocsCount">1,247</span> <span data-i18n="sbDocs">docs this month</span></div>
      </aside>
      <main class="main">
        <!-- Overview -->
        <section id="view-overview" class="subview" style="display:block">
          <div class="kpi">
            <div class="metric"><div class="label" data-i18n="metricTotalExpenses">Total Expenses</div><div class="value">$12,458</div><span class="badge success">‚Üì 12%</span></div>
            <div class="metric"><div class="label" data-i18n="metricDocs">Docs processed</div><div class="value">847</div></div>
            <div class="metric"><div class="label" data-i18n="metricTax">Tax Deductions</div><div class="value">$3,892</div></div>
            <div class="metric"><div class="label" data-i18n="metricCO2Month">CO‚ÇÇe (month)</div><div class="value">2.4t</div></div>
          </div>
          <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; margin-top:12px">
            <div class="cp-step">
              <div class="cp-hd" data-i18n="ovLineTitle">Monthly Revenue vs Expenses</div>
              <div class="cp-body"><canvas id="ov_line"></canvas></div>
            </div>
            <div class="cp-step">
              <div class="cp-hd" data-i18n="ovBarTitle">Monthly Users</div>
              <div class="cp-body"><canvas id="ov_bar"></canvas></div>
            </div>
          </div>
        </section>

        <!-- REPORTS -->
        <section id="view-reports" class="subview" style="display:none">
          <div class="cp-step"><div class="cp-hd" data-i18n="repPnl">P&amp;L (Monthly)</div><div class="cp-body"><canvas id="rep_pnl"></canvas></div></div>
          <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px">
            <div class="cp-step"><div class="cp-hd" data-i18n="repTopCats">Top Categories</div><div class="cp-body"><canvas id="rep_doughnut"></canvas></div></div>
            <div class="cp-step"><div class="cp-hd" data-i18n="repCash">Cash In vs Out</div><div class="cp-body"><canvas id="rep_cash"></canvas></div></div>
          </div>
        </section>

        <!-- CARBON PASSPORT -->
        <section id="view-passport" class="subview" style="display:none">
          <div class="cp-step">
            <div class="cp-hd"><span data-i18n="cpStep1">1 ‚Ä¢ Select Product</span> <button class="btn btn-secondary" style="border-color:#fff; color:#fff; margin-left:auto" data-i18n="cpViewAnalytics">üìä View Analytics</button></div>
            <div class="cp-body">
              <div class="row">
                <div class="input">
                  <label data-i18n="cpProduct">Product</label>
                  <select>
                    <option>EcoBottle 500ml ‚Äì Batch #2024‚ÄëQ4</option>
                    <option>EcoBottle 750ml ‚Äì Batch #2024‚ÄëQ3</option>
                    <option>Refill Pack ‚Äì Batch #2024‚ÄëQ4</option>
                  </select>
                </div>
                <div class="input">
                  <label data-i18n="cpStart">Manufacturing Start</label>
                  <input type="date" value="2024-11-18"/>
                </div>
                <div class="input">
                  <label data-i18n="cpEnd">Manufacturing End</label>
                  <input type="date" value="2024-12-15"/>
                </div>
                <div class="input" style="max-width:220px">
                  <label data-i18n="cpVolume">Production Volume</label>
                  <input type="text" value="3,000 units"/>
                </div>
              </div>
            </div>
          </div>

          <div class="cp-step">
            <div class="cp-hd" data-i18n="cpStep2">2 ‚Ä¢ Related Invoices & Scope Classification</div>
            <div class="cp-body">
              <div class="grid3">
                <div class="scope"><div class="big">12</div><h4 data-i18n="scope1">Scope 1</h4><div class="sub" data-i18n="scope1desc">Direct Emissions</div></div>
                <div class="scope"><div class="big">8</div><h4 data-i18n="scope2">Scope 2</h4><div class="sub" data-i18n="scope2desc">Energy Indirect</div></div>
                <div class="scope"><div class="big">45</div><h4 data-i18n="scope3">Scope 3</h4><div class="sub" data-i18n="scope3desc">Other Indirect</div></div>
              </div>

              <table class="table" style="margin-top:8px">
                <thead><tr><th data-i18n="thInvoice">Invoice</th><th data-i18n="thVendor">Vendor</th><th data-i18n="thCategory">Category</th><th data-i18n="thAmount">Amount</th><th data-i18n="thScope">Scope</th><th data-i18n="thConfidence">Confidence</th></tr></thead>
                <tbody>
                  <tr><td>INV‚Äë2024‚Äë1023</td><td>Regional Power Co</td><td data-i18n="catElectricity">Electricity</td><td>$2,845</td><td><span class="badge accent">Scope 2</span></td><td><span class="badge success">98%</span></td></tr>
                  <tr><td>INV‚Äë2024‚Äë1089</td><td>PlasticCo Materials</td><td data-i18n="catRaw">Raw Materials</td><td>$12,500</td><td><span class="badge accent">Scope 3</span></td><td><span class="badge success">95%</span></td></tr>
                  <tr><td>INV‚Äë2024‚Äë1156</td><td>Fleet Fuel Services</td><td data-i18n="catFuel">Vehicle Fuel</td><td>$890</td><td><span class="badge accent">Scope 1</span></td><td><span class="badge success">98%</span></td></tr>
                </tbody>
              </table>

              <div class="note">
                <b data-i18n="missingTitle">Missing Critical Invoices Detected</b>
                <ul style="margin:8px 0 0 18px">
                  <li data-i18n="missingWaste">Waste management invoice for production period</li>
                  <li data-i18n="missingTransport">Transportation invoice for finished goods delivery</li>
                </ul>
                <button class="btn btn-primary" style="margin-top:8px" data-i18n="btnUploadMissing">üì§ Upload Missing Invoices</button>
              </div>
            </div>
          </div>

          <div class="cp-step">
            <div class="cp-hd" data-i18n="cpStep3">3 ‚Ä¢ Carbon Calculation</div>
            <div class="cp-body">
              <div class="row">
                <div class="api-pill"><span class="dot ok"></span><div><b data-i18n="apiEnergy">EPA Energy Emissions API</b><div class="sub" data-i18n="apiConnected">Connected</div></div></div>
                <div class="api-pill"><span class="dot ok"></span><div><b data-i18n="apiTransport">Transport Emissions Calculator</b><div class="sub" data-i18n="apiConnected">Connected</div></div></div>
                <div class="api-pill"><span class="dot wait"></span><div><b data-i18n="apiWaste">Waste Processing Factors</b><div class="sub" data-i18n="apiConnecting">Connecting‚Ä¶</div></div></div>
                <div class="api-pill"><span class="dot ok"></span><div><b data-i18n="apiMaterials">Material Lifecycle DB</b><div class="sub" data-i18n="apiConnected">Connected</div></div></div>
              </div>
              <button id="calcBtn" class="btn btn-primary btn-wide" data-i18n="btnCalc">‚öôÔ∏è Calculate Carbon Footprint</button>
            </div>
          </div>

          <div id="cpResult" class="cp-step" style="display:none">
            <div class="cp-hd" data-i18n="calcDone">Calculation Complete ‚úì</div>
            <div class="cp-body">
              <div class="result">
                <div class="tile">
                  <h3 data-i18n="totalCF">Total Carbon Footprint</h3>
                  <div class="val" id="totalCO2">2,847</div>
                  <div>kg CO‚ÇÇe</div>
                </div>
                <div class="tile">
                  <h3 data-i18n="perUnit">Per Unit</h3>
                  <div class="val">0.95</div>
                  <div>kg CO‚ÇÇe / unit</div>
                </div>
              </div>

              <div class="breakdown" style="margin-top:12px">
                <h3 style="margin:0 0 8px" data-i18n="emissionBreakdown">Emission Breakdown</h3>
                <div class="sub"><span data-i18n="scope1Long">Scope 1 (Direct)</span> ‚Äî 15% ‚Ä¢ 427 kg CO‚ÇÇe</div>
                <div class="prog"><span style="width:15%; background:#64B5F6"></span></div>
                <div class="sub" style="margin-top:8px"><span data-i18n="scope2Long">Scope 2 (Energy)</span> ‚Äî 25% ‚Ä¢ 712 kg CO‚ÇÇe</div>
                <div class="prog"><span style="width:25%; background:#BA68C8"></span></div>
                <div class="sub" style="margin-top:8px"><span data-i18n="scope3Long">Scope 3 (Supply Chain)</span> ‚Äî 60% ‚Ä¢ 1,708 kg CO‚ÇÇe</div>
                <div class="prog"><span style="width:60%; background:#81C784"></span></div>

                <div class="actions">
                  <button class="btn btn-ghost" id="dlPassport" data-i18n="btnDlPassport">‚¨áÔ∏è Download Carbon Passport (PDF)</button>
                  <button class="btn btn-primary qr" id="mkQR" data-i18n="btnGenQR">ÔøΩ QR ‚Ä¢ Generate Verification</button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- OTHER SECTIONS -->
        <section id="view-banking" class="subview" style="display:none">
          <div class="kpi">
            <div class="metric"><div class="label" data-i18n="bankMain">Main Balance</div><div class="value">$120k</div></div>
            <div class="metric"><div class="label" data-i18n="bankSavings">Savings</div><div class="value">$60k</div></div>
            <div class="metric"><div class="label" data-i18n="bankPayroll">Payroll</div><div class="value">$22k</div></div>
            <div class="metric"><div class="label" data-i18n="bankTaxes">Taxes</div><div class="value">$18k</div></div>
          </div>
        </section>
        <section id="view-integrations" class="subview" style="display:none">
          <div class="grid" style="grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px">
            <div class="kpi"><div class="metric"><div class="label">Gmail</div><div class="value" data-i18n="connected">Connected</div></div></div>
            <div class="kpi"><div class="metric"><div class="label">Drive</div><div class="value" data-i18n="connected">Connected</div></div></div>
            <div class="kpi"><div class="metric"><div class="label">Telegram</div><div class="value" data-i18n="connected">Connected</div></div></div>
          </div>
        </section>
        <section id="view-settings" class="subview" style="display:none">
          <div class="cp-step"><div class="cp-hd" data-i18n="settingsProfile">Profile</div>
            <div class="cp-body">
              <div class="row">
                <div class="input"><label data-i18n="settingsName">Name</label><input placeholder="John Doe"/></div>
                <div class="input"><label data-i18n="settingsCompany">Company</label><input placeholder="Acme Inc."/></div>
              </div>
              <button class="btn btn-primary" style="margin-top:10px" data-i18n="settingsSave">Save</button>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- EXPORT VIEW -->
  <div id="download" class="view">
    <div class="section" style="text-align:center">
      <h2 data-i18n="dlTitle">Download this app</h2>
      <p class="sub" data-i18n="dlSub">Save a single HTML you can run locally.</p>
      <button class="btn btn-primary" onclick="downloadSelf()" data-i18n="dlBtn">üì• Download HTML</button>
      <p class="sub" style="margin-top:10px" data-i18n="dlTip">Tip: you can also press <b>Ctrl/Cmd + S</b>.</p>
    </div>
  </div>

  <!-- Mobile helpers -->
  <div class="mobile-nav" id="mnav" style="display:none">
    <button data-jump="#general" data-i18n="home">Home</button>
    <button data-jump="#differentiators" data-i18n="why">Why</button>
    <button data-jump="#signup" data-i18n="signup">Sign‚Äëup</button>
  </div>
  <button class="fab" id="fab" title="Quick upload" style="display:none">Ôºã</button>

<script>
  // Simple router for top tabs
  document.querySelectorAll('.pill').forEach(p=>{
    p.addEventListener('click', ()=>{
      document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));
      p.classList.add('active');
      const t = p.dataset.tab;
      document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
      document.getElementById(t).classList.add('active');
      if(t==='dashboard'){ setTimeout(initDashboardCharts, 0); }
      if(t==='landing'){ setTimeout(initSparklines, 0); }
    });
  });

  // Dashboard sidebar
  document.querySelectorAll('.sidebar .nav-item').forEach(n=> n.addEventListener('click', ()=>{
    document.querySelectorAll('.sidebar .nav-item').forEach(x=>x.classList.remove('active'));
    n.classList.add('active');
    const target = 'view-'+n.dataset.sub;
    document.querySelectorAll('.subview').forEach(v=> v.style.display='none');
    document.getElementById(target).style.display='block';
  }));

  // i18n ‚Äî GLOBAL (Landing + Dashboard + Export)
  const i18n = {
    en: {
      topLanding:"Landing", topDashboard:"Dashboard", topExport:"Export",
      navGeneral:"General", navDiff:"Differentiators", navSignup:"Sign‚Äëup & Integrations",
      badgeSoc2:"SOC2‚Äëready", badgeOcr:"Sub‚Äësecond OCR", badgeCarbon:"Carbon Passport",
      heroTitle:"Your AI‚ÄëPowered CFO in the Cloud",
      heroSub:"Connect email, drives, and chats ‚Äî CloudCFO auto‚Äëdiscovers receipts, extracts data in <b>&lt;500ms</b>, and turns them into real‚Äëtime insights and a üå± Carbon Passport.",
      btnConnect:"üîç Connect your accounts", btnUpload:"üì§ Quick upload",
      worksWith:"Works with: Gmail ¬∑ Drive ¬∑ Dropbox ¬∑ WhatsApp ¬∑ Telegram",
      metricTotalExpenses:"Total Expenses", metricCarbon:"Carbon this month", metricDocs:"Docs processed", metricHit:"Hit rate", metricAccSla:"‚úì Accuracy SLA",
      whyTitle:"Why CloudCFO", whySub:"AI‚Äëfirst financial automation, native chat integrations, and built‚Äëin carbon intelligence.",
      featAI:"AI‚ÄëFirst Extraction", featAIDesc:"Advanced LLM + vision pipeline delivers <b>sub‚Äësecond</b> processing and self‚Äëlearning patterns.",
      featChat:"WhatsApp & Telegram Native", featChatDesc:"Send a photo, we do the rest ‚Äî the fastest way to capture receipts on mobile.",
      featCarbon:"Carbon Passport", featCarbonDesc:"Automatic Scope 1/2/3 mapping from invoices with downloadable, verifiable passports.",
      featDev:"Developer‚ÄëFriendly", featDevDesc:"Clean APIs & webhooks, great docs, and thoughtful defaults inspired by Stripe.",
      signupTitle:"Sign‚Äëup & Connect your channels", signupSub:"Choose any intake source below. We‚Äôll start auto‚Äëdiscovering receipts instantly.",
      found:"found", accuracy:"Accuracy", connected:"Connected", connect:"Connect",
      outlookDesc:"Import from Microsoft email", dropboxDesc:"Scan selected folders", waDesc:"Forward photos or PDFs",
      home:"Home", why:"Why", signup:"Sign‚Äëup",
      // Dashboard Sidebar
      sbOverview:"Overview", sbReports:"Financial Reports", sbPassport:"Carbon Passport", sbBanking:"Banking", sbIntegrations:"Integrations", sbSettings:"Settings",
      sbPlan:"Pro Plan", sbDocs:"docs this month",
      // Dashboard KPIs & Charts
      metricTax:"Tax Deductions", metricCO2Month:"CO‚ÇÇe (month)",
      ovLineTitle:"Monthly Revenue vs Expenses", ovBarTitle:"Monthly Users",
      repPnl:"P&L (Monthly)", repTopCats:"Top Categories", repCash:"Cash In vs Out",
      // Carbon Passport
      cpStep1:"1 ‚Ä¢ Select Product", cpViewAnalytics:"üìä View Analytics",
      cpProduct:"Product", cpStart:"Manufacturing Start", cpEnd:"Manufacturing End", cpVolume:"Production Volume",
      cpStep2:"2 ‚Ä¢ Related Invoices & Scope Classification",
      scope1:"Scope 1", scope2:"Scope 2", scope3:"Scope 3",
      scope1desc:"Direct Emissions", scope2desc:"Energy Indirect", scope3desc:"Other Indirect",
      thInvoice:"Invoice", thVendor:"Vendor", thCategory:"Category", thAmount:"Amount", thScope:"Scope", thConfidence:"Confidence",
      catElectricity:"Electricity", catRaw:"Raw Materials", catFuel:"Vehicle Fuel",
      missingTitle:"Missing Critical Invoices Detected", missingWaste:"Waste management invoice for production period", missingTransport:"Transportation invoice for finished goods delivery",
      btnUploadMissing:"üì§ Upload Missing Invoices",
      cpStep3:"3 ‚Ä¢ Carbon Calculation", apiEnergy:"EPA Energy Emissions API", apiTransport:"Transport Emissions Calculator", apiWaste:"Waste Processing Factors", apiMaterials:"Material Lifecycle DB", apiConnected:"Connected", apiConnecting:"Connecting‚Ä¶",
      btnCalc:"‚öôÔ∏è Calculate Carbon Footprint",
      calcDone:"Calculation Complete ‚úì", totalCF:"Total Carbon Footprint", perUnit:"Per Unit", emissionBreakdown:"Emission Breakdown",
      btnDlPassport:"‚¨áÔ∏è Download Carbon Passport (PDF)", btnGenQR:"ÔøΩ QR ‚Ä¢ Generate Verification",
      // Banking
      bankMain:"Main Balance", bankSavings:"Savings", bankPayroll:"Payroll", bankTaxes:"Taxes",
      // Settings
      settingsProfile:"Profile", settingsName:"Name", settingsCompany:"Company", settingsSave:"Save",
      // Export
      dlTitle:"Download this app", dlSub:"Save a single HTML you can run locally.", dlBtn:"üì• Download HTML", dlTip:"Tip: you can also press <b>Ctrl/Cmd + S</b>."
    },
    fr: {
      topLanding:"Accueil", topDashboard:"Tableau de bord", topExport:"Export",
      navGeneral:"G√©n√©ral", navDiff:"Diff√©renciateurs", navSignup:"Inscription & Int√©grations",
      badgeSoc2:"Pr√™t pour SOC2", badgeOcr:"OCR en dessous d‚Äô1s", badgeCarbon:"Passeport Carbone",
      heroTitle:"Votre CFO aliment√© par l‚ÄôIA, dans le cloud",
      heroSub:"Connectez e‚Äëmails, drives et messageries ‚Äî CloudCFO d√©couvre automatiquement les re√ßus, extrait les donn√©es en <b>&lt;500ms</b> et les transforme en insights temps r√©el et en üå± Passeport Carbone.",
      btnConnect:"üîç Connecter vos comptes", btnUpload:"üì§ T√©l√©versement rapide",
      worksWith:"Fonctionne avec : Gmail ¬∑ Drive ¬∑ Dropbox ¬∑ WhatsApp ¬∑ Telegram",
      metricTotalExpenses:"D√©penses totales", metricCarbon:"Carbone du mois", metricDocs:"Documents trait√©s", metricHit:"Taux de r√©ussite", metricAccSla:"‚úì SLA de pr√©cision",
      whyTitle:"Pourquoi CloudCFO", whySub:"Automatisation financi√®re IA‚Äëfirst, int√©grations de messagerie natives et intelligence carbone int√©gr√©e.",
      featAI:"Extraction IA‚ÄëFirst", featAIDesc:"Pipeline LLM + vision offrant un traitement <b>sub‚Äëseconde</b> et des mod√®les auto‚Äëapprenants.",
      featChat:"Natif WhatsApp & Telegram", featChatDesc:"Envoyez une photo, on s‚Äôoccupe du reste ‚Äî la mani√®re la plus rapide de capturer des re√ßus sur mobile.",
      featCarbon:"Passeport Carbone", featCarbonDesc:"Cartographie automatique des Scopes 1/2/3 √† partir des factures avec passeports t√©l√©chargeables et v√©rifiables.",
      featDev:"Pens√© pour les d√©veloppeurs", featDevDesc:"APIs & webhooks clairs, excellente doc et bons d√©fauts inspir√©s de Stripe.",
      signupTitle:"Inscrivez‚Äëvous & connectez vos canaux", signupSub:"Choisissez une source ci‚Äëdessous. Nous commencerons la d√©couverte des re√ßus imm√©diatement.",
      found:"trouv√©s", accuracy:"Pr√©cision", connected:"Connect√©", connect:"Connecter",
      outlookDesc:"Import depuis Microsoft email", dropboxDesc:"Scanner des dossiers s√©lectionn√©s", waDesc:"Transf√©rez des photos ou PDF",
      home:"Accueil", why:"Pourquoi", signup:"Inscription",
      // Dashboard Sidebar
      sbOverview:"Vue d‚Äôensemble", sbReports:"Rapports financiers", sbPassport:"Passeport Carbone", sbBanking:"Banque", sbIntegrations:"Int√©grations", sbSettings:"Param√®tres",
      sbPlan:"Offre Pro", sbDocs:"docs ce mois‚Äëci",
      // Dashboard KPIs & Charts
      metricTax:"D√©ductions fiscales", metricCO2Month:"CO‚ÇÇe (mois)",
      ovLineTitle:"Revenus vs D√©penses mensuels", ovBarTitle:"Utilisateurs mensuels",
      repPnl:"Compte de r√©sultat (mensuel)", repTopCats:"Cat√©gories principales", repCash:"Entr√©es vs Sorties de tr√©sorerie",
      // Carbon Passport
      cpStep1:"1 ‚Ä¢ S√©lectionner un produit", cpViewAnalytics:"üìä Voir l‚Äôanalytique",
      cpProduct:"Produit", cpStart:"D√©but de fabrication", cpEnd:"Fin de fabrication", cpVolume:"Volume de production",
      cpStep2:"2 ‚Ä¢ Factures li√©es & classification des scopes",
      scope1:"Scope 1", scope2:"Scope 2", scope3:"Scope 3",
      scope1desc:"√âmissions directes", scope2desc:"√ânergie indirecte", scope3desc:"Autres indirectes",
      thInvoice:"Facture", thVendor:"Fournisseur", thCategory:"Cat√©gorie", thAmount:"Montant", thScope:"Scope", thConfidence:"Confiance",
      catElectricity:"√âlectricit√©", catRaw:"Mati√®res premi√®res", catFuel:"Carburant v√©hicules",
      missingTitle:"Factures critiques manquantes d√©tect√©es", missingWaste:"Facture de gestion des d√©chets pour la p√©riode de production", missingTransport:"Facture de transport pour la livraison des produits finis",
      btnUploadMissing:"üì§ T√©l√©verser les factures manquantes",
      cpStep3:"3 ‚Ä¢ Calcul carbone", apiEnergy:"API des √©missions d‚Äô√©nergie (EPA)", apiTransport:"Calculateur d‚Äô√©missions de transport", apiWaste:"Facteurs de traitement des d√©chets", apiMaterials:"BD cycle de vie des mat√©riaux", apiConnected:"Connect√©", apiConnecting:"Connexion‚Ä¶",
      btnCalc:"‚öôÔ∏è Calculer l‚Äôempreinte carbone",
      calcDone:"Calcul termin√© ‚úì", totalCF:"Empreinte carbone totale", perUnit:"Par unit√©", emissionBreakdown:"R√©partition des √©missions",
      btnDlPassport:"‚¨áÔ∏è T√©l√©charger le Passeport Carbone (PDF)", btnGenQR:"ÔøΩ QR ‚Ä¢ G√©n√©rer la v√©rification",
      // Banking
      bankMain:"Solde principal", bankSavings:"√âpargne", bankPayroll:"Paie", bankTaxes:"Imp√¥ts",
      // Settings
      settingsProfile:"Profil", settingsName:"Nom", settingsCompany:"Soci√©t√©", settingsSave:"Enregistrer",
      // Export
      dlTitle:"T√©l√©charger cette application", dlSub:"Enregistrez un seul fichier HTML ex√©cutable en local.", dlBtn:"üì• T√©l√©charger l‚ÄôHTML", dlTip:"Astuce : vous pouvez aussi faire <b>Ctrl/Cmd + S</b>."
    }
  };
  let lang='en';
  function applyI18n(){
    document.querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n');
      if(i18n[lang][key]) el.innerHTML = i18n[lang][key];
    });
    document.getElementById('btnEN').classList.toggle('active', lang==='en');
    document.getElementById('btnFR').classList.toggle('active', lang==='fr');
    document.getElementById('fab').title = lang==='en' ? 'Quick upload' : 'T√©l√©versement rapide';
    // Update charts with current language
    if(window._chartsInitialized){ updateChartLabels(); }
  }
  document.getElementById('btnEN').onclick = ()=>{lang='en'; applyI18n();};
  document.getElementById('btnFR').onclick = ()=>{lang='fr'; applyI18n();};

  // Landing micro‚Äëinteractions
  document.getElementById('connectBtn').addEventListener('click', ()=>document.querySelector('#signup').scrollIntoView({behavior:'smooth'}));
  document.getElementById('uploadBtn').addEventListener('click', ()=>alert(lang==='en'?'Open file picker (demo).':'Ouvrir le s√©lecteur de fichiers (d√©mo).'));

  // Mobile helpers visibility
  const mq = window.matchMedia('(max-width: 980px)');
  const toggleMobile = () => {
    const show = mq.matches;
    document.getElementById('mnav').style.display = show ? 'flex' : 'none';
    document.getElementById('fab').style.display = show ? 'block' : 'none';
  };
  toggleMobile(); mq.addEventListener('change', toggleMobile);

  document.querySelectorAll('.connect').forEach(btn=>{
    btn.addEventListener('click', (e)=>{
      if(btn.textContent.includes('‚úì')) return;
      btn.innerHTML = '‚úì ' + (lang==='en' ? i18n.en.connected : i18n.fr.connected);
      btn.closest('.svc').classList.add('connected');
    });
  });

  // Sparklines on landing device
  function initSparklines(){
    const ctx1 = document.getElementById('spark1')?.getContext('2d');
    const ctx2 = document.getElementById('spark2')?.getContext('2d');
    if(!ctx1 || !ctx2) return;
    const grad = (ctx, c1, c2)=>{ const g = ctx.createLinearGradient(0,0,0,100); g.addColorStop(0, c1); g.addColorStop(1, c2); return g; };
    const common = {plugins:{legend:{display:false}, tooltip:{backgroundColor:'rgba(255,255,255,.6)', titleColor:'#0a1628', bodyColor:'#0a1628', borderColor:'rgba(0,0,0,.1)', borderWidth:1, padding:10}}, scales:{x:{display:false}, y:{display:false}}, elements:{line:{tension:.4, borderWidth:2}, point:{radius:0}}};
    new Chart(ctx1, {type:'line', data:{labels:[...Array(16).keys()], datasets:[{data:[8,9,8,10,12,13,12,14,16,15,16,18,16,19,18,20], borderColor:'#7dc5ff', fill:true, backgroundColor:grad(ctx1, 'rgba(125,197,255,.5)','rgba(125,197,255,0)')} ]}, options: common});
    new Chart(ctx2, {type:'line', data:{labels:[...Array(16).keys()], datasets:[{data:[2.8,2.6,2.5,2.7,2.4,2.3,2.5,2.2,2.1,2.3,2.2,2.0,2.1,2.0,2.4,2.4], borderColor:'#7fffd4', fill:true, backgroundColor:grad(ctx2, 'rgba(127,255,212,.45)','rgba(127,255,212,0)')}]}, options: common});
  }
  initSparklines();

  // Dashboard charts
  let dashInit=false;
  let _charts = {};
  function initDashboardCharts(){
    if(dashInit) return; dashInit=true;
    window._chartsInitialized = true;
    _charts.ov_line = new Chart(document.getElementById('ov_line'),{
      type:'line',
      data:{labels:['Jan','Mar','May','Jul','Sep','Nov'],
        datasets:[{label: i18n[lang].repRevenue || 'Revenue', data:[70,85,120,150,170,200], borderColor:'#0066FF',tension:.3,fill:false},
                  {label: i18n[lang].repExpenses || 'Expenses', data:[40,50,60,70,85,95], borderColor:'#10B981',tension:.3,fill:false}]},
      options:{plugins:{legend:{position:'bottom'}},scales:{y:{grid:{color:'rgba(0,0,0,.06)'}}}}
    });
    _charts.ov_bar = new Chart(document.getElementById('ov_bar'),{
      type:'bar',
      data:{labels:['Jan','Mar','May','Jul','Sep','Nov'],
        datasets:[{label: i18n[lang].repActiveUsers || 'Active Users', data:[120,240,380,560,720,900],backgroundColor:'#0891B2'}]},
      options:{plugins:{legend:{display:false}},scales:{y:{grid:{color:'rgba(0,0,0,.06)'}}}}
    });
    _charts.rep_pnl = new Chart(document.getElementById('rep_pnl'),{
      type:'bar',
      data:{labels:['Jan','Feb','Mar','Apr','May','Jun'],
        datasets:[{label: i18n[lang].repRevenue || 'Revenue',data:[45,50,58,62,70,76],backgroundColor:'#0066FF'},
                  {label: i18n[lang].repCogs || 'COGS',data:[18,20,21,22,25,28],backgroundColor:'#9CA3AF'},
                  {label: i18n[lang].repOpex || 'OpEx',data:[12,13,14,15,16,17],backgroundColor:'#10B981'}]},
      options:{plugins:{legend:{position:'bottom'}},scales:{y:{grid:{color:'rgba(0,0,0,.06)'}}}}
    });
    _charts.rep_doughnut = new Chart(document.getElementById('rep_doughnut'),{
      type:'doughnut',
      data:{labels:[i18n[lang].lblPayroll || 'Payroll', i18n[lang].lblInfra || 'Infra', i18n[lang].lblMkt || 'Marketing', i18n[lang].lblGA || 'G&A'],
        datasets:[{data:[45,20,22,13],backgroundColor:['#0066FF','#0891B2','#10B981','#F59E0B']}]},
      options:{plugins:{legend:{position:'bottom'}}}
    });
    _charts.rep_cash = new Chart(document.getElementById('rep_cash'),{
      type:'bar',
      data:{labels:['Jan','Feb','Mar','Apr','May','Jun'],
        datasets:[{label: i18n[lang].lblCashIn || 'Cash In',data:[20,24,26,28,34,36],backgroundColor:'#10B981'},
                  {label: i18n[lang].lblCashOut || 'Cash Out',data:[18,19,22,24,26,29],backgroundColor:'#FF6B6B'}]},
      options:{plugins:{legend:{position:'bottom'}}}
    });
  }

  // additional labels for charts
  i18n.en.repRevenue = "Revenue"; i18n.fr.repRevenue = "Revenus";
  i18n.en.repExpenses = "Expenses"; i18n.fr.repExpenses = "D√©penses";
  i18n.en.repCogs = "COGS"; i18n.fr.repCogs = "Co√ªt des ventes";
  i18n.en.repOpex = "OpEx"; i18n.fr.repOpex = "Charges d'exploitation";
  i18n.en.lblPayroll = "Payroll"; i18n.fr.lblPayroll = "Paie";
  i18n.en.lblInfra = "Infra"; i18n.fr.lblInfra = "Infra";
  i18n.en.lblMkt = "Marketing"; i18n.fr.lblMkt = "Marketing";
  i18n.en.lblGA = "G&A"; i18n.fr.lblGA = "Frais g√©n√©raux";
  i18n.en.lblCashIn = "Cash In"; i18n.fr.lblCashIn = "Entr√©es";
  i18n.en.lblCashOut = "Cash Out"; i18n.fr.lblCashOut = "Sorties";
  i18n.en.repActiveUsers = "Active Users"; i18n.fr.repActiveUsers = "Utilisateurs actifs";

  function updateChartLabels(){
    if(!_charts.ov_line) return;
    _charts.ov_line.data.datasets[0].label = i18n[lang].repRevenue;
    _charts.ov_line.data.datasets[1].label = i18n[lang].repExpenses;
    _charts.ov_line.update();

    _charts.ov_bar.data.datasets[0].label = i18n[lang].repActiveUsers;
    _charts.ov_bar.update();

    _charts.rep_pnl.data.datasets[0].label = i18n[lang].repRevenue;
    _charts.rep_pnl.data.datasets[1].label = i18n[lang].repCogs;
    _charts.rep_pnl.data.datasets[2].label = i18n[lang].repOpex;
    _charts.rep_pnl.update();

    _charts.rep_doughnut.data.labels = [i18n[lang].lblPayroll, i18n[lang].lblInfra, i18n[lang].lblMkt, i18n[lang].lblGA];
    _charts.rep_doughnut.update();

    _charts.rep_cash.data.datasets[0].label = i18n[lang].lblCashIn;
    _charts.rep_cash.data.datasets[1].label = i18n[lang].lblCashOut;
    _charts.rep_cash.update();
  }

  // Carbon Passport interactions
  document.getElementById('calcBtn').addEventListener('click', ()=>{
    const res = document.getElementById('cpResult');
    res.style.display='block';
    res.scrollIntoView({behavior:'smooth'});
  });
  document.getElementById('dlPassport').addEventListener('click', ()=>{
    alert(lang==='en'?'Demo: generate a PDF passport here.':'D√©mo : g√©n√©rer ici un PDF du passeport.');
  });
  document.getElementById('mkQR').addEventListener('click', ()=>{
    alert(lang==='en'?'Demo: generate a verification QR code.':'D√©mo : g√©n√©rer un QR de v√©rification.');
  });

  // Download this HTML
  function downloadSelf(){
    const blob=new Blob([document.documentElement.outerHTML],{type:'text/html'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='CloudCFO-App-Bilingual-Dashboard-CarbonPassport-ENFR_v4.html'; a.click();
    URL.revokeObjectURL(url);
  }

  applyI18n();
</script>
</body>
</html>
